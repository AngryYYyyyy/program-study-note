{"remainingRequest":"I:\\MSB\\msb_hejiayun_lk\\hejiayun_ui\\node_modules\\babel-loader\\lib\\index.js!I:\\MSB\\msb_hejiayun_lk\\hejiayun_ui\\node_modules\\eslint-loader\\index.js??ref--13-0!I:\\MSB\\msb_hejiayun_lk\\hejiayun_ui\\src\\store\\modules\\permission.js","dependencies":[{"path":"I:\\MSB\\msb_hejiayun_lk\\hejiayun_ui\\src\\store\\modules\\permission.js","mtime":1683806931380},{"path":"I:\\MSB\\msb_hejiayun_lk\\hejiayun_ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\MSB\\msb_hejiayun_lk\\hejiayun_ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"I:\\MSB\\msb_hejiayun_lk\\hejiayun_ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJJOi9NU0IvbXNiX2hlamlheXVuX2xrL2hlamlheXVuX3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpLmRlZmF1bHQ7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGV4cG9ydHMubG9hZFZpZXcgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwoKdmFyIF9yb3V0ZXIgPSByZXF1aXJlKCJAL3JvdXRlciIpOwoKdmFyIF9tZW51ID0gcmVxdWlyZSgiQC9hcGkvbWVudSIpOwoKdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9sYXlvdXQvaW5kZXgiKSk7Cgp2YXIgX1BhcmVudFZpZXcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvY29tcG9uZW50cy9QYXJlbnRWaWV3IikpOwoKdmFyIHBlcm1pc3Npb24gPSB7CiAgc3RhdGU6IHsKICAgIHJvdXRlczogW10sCiAgICBhZGRSb3V0ZXM6IFtdCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9ST1VURVM6IGZ1bmN0aW9uIFNFVF9ST1VURVMoc3RhdGUsIHJvdXRlcykgewogICAgICBzdGF0ZS5hZGRSb3V0ZXMgPSByb3V0ZXM7CiAgICAgIHN0YXRlLnJvdXRlcyA9IF9yb3V0ZXIuY29uc3RhbnRSb3V0ZXMuY29uY2F0KHJvdXRlcyk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDnlJ/miJDot6/nlLEKICAgIEdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBHZW5lcmF0ZVJvdXRlcyhfcmVmKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgLy8g5ZCR5ZCO56uv6K+35rGC6Lev55Sx5pWw5o2uCiAgICAgICAgKDAsIF9tZW51LmdldFJvdXRlcnMpKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgYWNjZXNzZWRSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcihyZXMuZGF0YSk7CiAgICAgICAgICBhY2Nlc3NlZFJvdXRlcy5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJyonLAogICAgICAgICAgICByZWRpcmVjdDogJy80MDQnLAogICAgICAgICAgICBoaWRkZW46IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgY29tbWl0KCdTRVRfUk9VVEVTJywgYWNjZXNzZWRSb3V0ZXMpOwogICAgICAgICAgcmVzb2x2ZShhY2Nlc3NlZFJvdXRlcyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTsgLy8g6YGN5Y6G5ZCO5Y+w5Lyg5p2l55qE6Lev55Sx5a2X56ym5Liy77yM6L2s5o2i5Li657uE5Lu25a+56LGhCgpmdW5jdGlvbiBmaWx0ZXJBc3luY1JvdXRlcihhc3luY1JvdXRlck1hcCkgewogIHJldHVybiBhc3luY1JvdXRlck1hcC5maWx0ZXIoZnVuY3Rpb24gKHJvdXRlKSB7CiAgICBpZiAocm91dGUuY29tcG9uZW50KSB7CiAgICAgIC8vIExheW91dCBQYXJlbnRWaWV3IOe7hOS7tueJueauiuWkhOeQhgogICAgICBpZiAocm91dGUuY29tcG9uZW50ID09PSAnTGF5b3V0JykgewogICAgICAgIHJvdXRlLmNvbXBvbmVudCA9IF9pbmRleC5kZWZhdWx0OwogICAgICB9IGVsc2UgaWYgKHJvdXRlLmNvbXBvbmVudCA9PT0gJ1BhcmVudFZpZXcnKSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gX1BhcmVudFZpZXcuZGVmYXVsdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByb3V0ZS5jb21wb25lbnQgPSBsb2FkVmlldyhyb3V0ZS5jb21wb25lbnQpOwogICAgICB9CiAgICB9CgogICAgaWYgKHJvdXRlLmNoaWxkcmVuICE9IG51bGwgJiYgcm91dGUuY2hpbGRyZW4gJiYgcm91dGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgIHJvdXRlLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXIocm91dGUuY2hpbGRyZW4pOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0pOwp9Cgp2YXIgbG9hZFZpZXcgPSBmdW5jdGlvbiBsb2FkVmlldyh2aWV3KSB7CiAgLy8g6Lev55Sx5oeS5Yqg6L29CiAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICByZXR1cm4gcmVxdWlyZShbIkAvdmlld3MvIi5jb25jYXQodmlldyldLCByZXNvbHZlKTsKICB9Owp9OwoKZXhwb3J0cy5sb2FkVmlldyA9IGxvYWRWaWV3Owp2YXIgX2RlZmF1bHQgPSBwZXJtaXNzaW9uOwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["I:/MSB/msb_hejiayun_lk/hejiayun_ui/src/store/modules/permission.js"],"names":["permission","state","routes","addRoutes","mutations","SET_ROUTES","constantRoutes","concat","actions","GenerateRoutes","commit","Promise","resolve","then","res","accessedRoutes","filterAsyncRouter","data","push","path","redirect","hidden","asyncRouterMap","filter","route","component","Layout","ParentView","loadView","children","length","view","require"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE,EADH;AAELC,IAAAA,SAAS,EAAE;AAFN,GADU;AAKjBC,EAAAA,SAAS,EAAE;AACTC,IAAAA,UAAU,EAAE,oBAACJ,KAAD,EAAQC,MAAR,EAAmB;AAC7BD,MAAAA,KAAK,CAACE,SAAN,GAAkBD,MAAlB;AACAD,MAAAA,KAAK,CAACC,MAAN,GAAeI,uBAAeC,MAAf,CAAsBL,MAAtB,CAAf;AACD;AAJQ,GALM;AAWjBM,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,cAFO,gCAEoB;AAAA,UAAVC,MAAU,QAAVA,MAAU;AACzB,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B;AACA,gCAAaC,IAAb,CAAkB,UAAAC,GAAG,EAAI;AACvB,cAAMC,cAAc,GAAGC,iBAAiB,CAACF,GAAG,CAACG,IAAL,CAAxC;AACAF,UAAAA,cAAc,CAACG,IAAf,CAAoB;AAAEC,YAAAA,IAAI,EAAE,GAAR;AAAaC,YAAAA,QAAQ,EAAE,MAAvB;AAA+BC,YAAAA,MAAM,EAAE;AAAvC,WAApB;AACAX,UAAAA,MAAM,CAAC,YAAD,EAAeK,cAAf,CAAN;AACAH,UAAAA,OAAO,CAACG,cAAD,CAAP;AACD,SALD;AAMD,OARM,CAAP;AASD;AAZM;AAXQ,CAAnB,C,CA2BA;;AACA,SAASC,iBAAT,CAA2BM,cAA3B,EAA2C;AACzC,SAAOA,cAAc,CAACC,MAAf,CAAsB,UAAAC,KAAK,EAAI;AACpC,QAAIA,KAAK,CAACC,SAAV,EAAqB;AACnB;AACA,UAAID,KAAK,CAACC,SAAN,KAAoB,QAAxB,EAAkC;AAChCD,QAAAA,KAAK,CAACC,SAAN,GAAkBC,cAAlB;AACD,OAFD,MAEO,IAAIF,KAAK,CAACC,SAAN,KAAoB,YAAxB,EAAsC;AAC3CD,QAAAA,KAAK,CAACC,SAAN,GAAkBE,mBAAlB;AACD,OAFM,MAEA;AACLH,QAAAA,KAAK,CAACC,SAAN,GAAkBG,QAAQ,CAACJ,KAAK,CAACC,SAAP,CAA1B;AACD;AACF;;AACD,QAAID,KAAK,CAACK,QAAN,IAAkB,IAAlB,IAA0BL,KAAK,CAACK,QAAhC,IAA4CL,KAAK,CAACK,QAAN,CAAeC,MAA/D,EAAuE;AACrEN,MAAAA,KAAK,CAACK,QAAN,GAAiBb,iBAAiB,CAACQ,KAAK,CAACK,QAAP,CAAlC;AACD;;AACD,WAAO,IAAP;AACD,GAfM,CAAP;AAgBD;;AAEM,IAAMD,QAAQ,GAAG,SAAXA,QAAW,CAACG,IAAD,EAAU;AAAE;AAClC,SAAO,UAACnB,OAAD;AAAA,WAAcoB,OAAO,CAAC,mBAAYD,IAAZ,EAAD,EAAsBnB,OAAtB,CAArB;AAAA,GAAP;AACD,CAFM;;;eAIQZ,U","sourcesContent":["import { constantRoutes } from '@/router'\r\nimport { getRouters } from '@/api/menu'\r\nimport Layout from '@/layout/index'\r\nimport ParentView from '@/components/ParentView';\r\n\r\nconst permission = {\r\n  state: {\r\n    routes: [],\r\n    addRoutes: []\r\n  },\r\n  mutations: {\r\n    SET_ROUTES: (state, routes) => {\r\n      state.addRoutes = routes\r\n      state.routes = constantRoutes.concat(routes)\r\n    }\r\n  },\r\n  actions: {\r\n    // 生成路由\r\n    GenerateRoutes({ commit }) {\r\n      return new Promise(resolve => {\r\n        // 向后端请求路由数据\r\n        getRouters().then(res => {\r\n          const accessedRoutes = filterAsyncRouter(res.data)\r\n          accessedRoutes.push({ path: '*', redirect: '/404', hidden: true })\r\n          commit('SET_ROUTES', accessedRoutes)\r\n          resolve(accessedRoutes)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// 遍历后台传来的路由字符串，转换为组件对象\r\nfunction filterAsyncRouter(asyncRouterMap) {\r\n  return asyncRouterMap.filter(route => {\r\n    if (route.component) {\r\n      // Layout ParentView 组件特殊处理\r\n      if (route.component === 'Layout') {\r\n        route.component = Layout\r\n      } else if (route.component === 'ParentView') {\r\n        route.component = ParentView\r\n      } else {\r\n        route.component = loadView(route.component)\r\n      }\r\n    }\r\n    if (route.children != null && route.children && route.children.length) {\r\n      route.children = filterAsyncRouter(route.children)\r\n    }\r\n    return true\r\n  })\r\n}\r\n\r\nexport const loadView = (view) => { // 路由懒加载\r\n  return (resolve) =>  require([`@/views/${view}`], resolve)\r\n}\r\n\r\nexport default permission\r\n"]}]}